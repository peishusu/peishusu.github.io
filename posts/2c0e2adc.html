<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>退役军人在线培训app项目 | 沛公共的JAVA学习之旅</title><meta name="author" content="peishusu"><meta name="copyright" content="peishusu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="退役军人在线培训app项目">
<meta property="og:type" content="article">
<meta property="og:title" content="退役军人在线培训app项目">
<meta property="og:url" content="http://example.com/posts/2c0e2adc.html">
<meta property="og:site_name" content="沛公共的JAVA学习之旅">
<meta property="og:description" content="退役军人在线培训app项目">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://tse2-mm.cn.bing.net/th/id/OIP-C.o3PrY54hzhMsJ0tEVOZiUwHaEr?w=254&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7">
<meta property="article:published_time" content="2024-05-29T14:30:55.000Z">
<meta property="article:modified_time" content="2024-07-16T02:42:33.131Z">
<meta property="article:author" content="peishusu">
<meta property="article:tag" content="项目">
<meta property="article:tag" content="退役军人在线培训app项目">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://tse2-mm.cn.bing.net/th/id/OIP-C.o3PrY54hzhMsJ0tEVOZiUwHaEr?w=254&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/posts/2c0e2adc.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: peishusu","link":"链接: ","source":"来源: 沛公共的JAVA学习之旅","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '退役军人在线培训app项目',
  isPost: true,
  isHome: false,
  isHighlightShrink: true,
  isToc: true,
  postUpdate: '2024-07-16 10:42:33'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/loading.gif" data-original="/img/jilaiya.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">32</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">28</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 有趣的我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://tse2-mm.cn.bing.net/th/id/OIP-C.o3PrY54hzhMsJ0tEVOZiUwHaEr?w=254&amp;h=180&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.3&amp;pid=1.7')"><nav id="nav"><span id="blog-info"><a href="/" title="沛公共的JAVA学习之旅"><span class="site-name">沛公共的JAVA学习之旅</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 有趣的我</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">退役军人在线培训app项目</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-05-29T14:30:55.000Z" title="发表于 2024-05-29 22:30:55">2024-05-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-07-16T02:42:33.131Z" title="更新于 2024-07-16 10:42:33">2024-07-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%A1%B9%E7%9B%AE/">项目</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%A1%B9%E7%9B%AE/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/">退役军人在线培训app项目</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">9.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>30分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="退役军人在线培训app项目"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="基础框架搭建"><a href="#基础框架搭建" class="headerlink" title="基础框架搭建"></a>基础框架搭建</h1><h2 id="构建父工程以及基础base工程"><a href="#构建父工程以及基础base工程" class="headerlink" title="构建父工程以及基础base工程"></a>构建父工程以及基础base工程</h2><h3 id="git相关的问题"><a href="#git相关的问题" class="headerlink" title="git相关的问题"></a>git相关的问题</h3><p>① git产生冲突的原因，以及如何解决？</p>
<p>② 你是在哪个分支上面工作的？</p>
<p>不是在主分支上面开发的，而是在技术经理创建的独立的开发分支上面进行开发的，最后由技术经理将开发分支合并到主分支。</p>
<p>③ 数据库建表注意的点</p>
<img src="/img/loading.gif" data-original="/posts/2c0e2adc/image-20240529230220128.png" class title="如图">

<h1 id="1、内容管理模块"><a href="#1、内容管理模块" class="headerlink" title="*1、内容管理模块*"></a><em><strong>*1、内容管理模块*</strong></em></h1><h2 id="1-1-课程查询"><a href="#1-1-课程查询" class="headerlink" title="*1.1 课程查询*"></a><em><strong>*1.1 课程查询*</strong></em></h2><h2 id="1-2-课程分类查询"><a href="#1-2-课程分类查询" class="headerlink" title="*1.2 课程分类查询*"></a><em><strong>*1.2 课程分类查询*</strong></em></h2><h3 id="1-2-1-需求分析"><a href="#1-2-1-需求分析" class="headerlink" title="*1.2.1 需求分析*"></a><em><strong>*1.2.1 需求分析*</strong></em></h3><p>当我们完成课程查询的功能后，下一步要实现****新增课程*<em><strong>（</strong></em>*录播、直播****），但是新增课程时，需要我们额外提供课程的分类信息。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps1.jpg" alt="img"> </p>
<p>其中的，****课程等级、课程类型****都是数据字典里面已有的信息（xcplus-system数据库的dictionary表），这部分信息前端已经从系统管理服务中读取到了。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps2.jpg" alt="img"> </p>
<p>但是****课程分类信息*<em><strong>没有在数据字典表里面存放，而是单独一张课程分类表来存放，存储在</strong></em>*内容管理数据库（xcplus-content）*<em><strong>中的</strong></em>*课程分类表（course_category）****。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps3.jpg" alt="img"> </p>
<h3 id="1-2-2-课程分类表设计以及对应的实体类"><a href="#1-2-2-课程分类表设计以及对应的实体类" class="headerlink" title="*1.2.2 课程分类表设计以及对应的实体类*"></a><em><strong>*1.2.2 课程分类表设计以及对应的实体类*</strong></em></h3><p>表结构如下：</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps4.jpg" alt="img"> </p>
<p>对应的实体类：</p>
<p>@Data<br>@TableName(“course_category”)<br>public class CourseCategory implements Serializable {</p>
<p>  private static final long <strong>serialVersionUID</strong> &#x3D; 1L;</p>
<p>  <strong>&#x2F;</strong>****<br>**   ***** <strong>主键</strong>**<br>**   <em><strong>&#x2F;</strong></em>*<br>**  private String id;</p>
<p>  <strong>&#x2F;</strong>****<br>**   ***** <strong>分类名称</strong>**<br>**   <em><strong>&#x2F;</strong></em>*<br>**  private String name;</p>
<p>  <strong>&#x2F;</strong>****<br>**   ***** <strong>分类标签默认和名称一样</strong>**<br>**   <em><strong>&#x2F;</strong></em>*<br>**  private String label;</p>
<p>  <strong>&#x2F;</strong>****<br>**   ***** <strong>父结点<strong><strong>id</strong></strong>（第一级的父节点是<strong><strong>0</strong></strong>，自关联字段<strong><strong>id</strong></strong>）**</strong><br>**   <em><strong>&#x2F;</strong></em>*<br>**  private String parentid;</p>
<p>  <strong>&#x2F;</strong>****<br>**   ***** <strong>是否显示</strong>**<br>**   <em><strong>&#x2F;</strong></em>*<br>**  private Integer isShow;</p>
<p>  <strong>&#x2F;</strong>****<br>**   ***** <strong>排序字段</strong>**<br>**   <em><strong>&#x2F;</strong></em>*<br>**  private Integer orderby;</p>
<p>  <strong>&#x2F;</strong>****<br>**   ***** <strong>是否叶子</strong>**<br>**   <em><strong>&#x2F;</strong></em>*<br>**  private Integer isLeaf;</p>
<p>}</p>
<h3 id="1-2-3-接口定义"><a href="#1-2-3-接口定义" class="headerlink" title="*1.2.3 接口定义*"></a><em><strong>*1.2.3 接口定义*</strong></em></h3><p>控制层的接口： 此接口返回****全部课程分类*<em><strong>，以</strong></em>*树形结构****返回</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps5.jpg" alt="img"> </p>
<p>一共分为三级分类，根目录（1），二级分类（1-2），三级分类（1-2-1）</p>
<p>{<br>“id” : “1-2”,<br>“isLeaf” : null,<br>“isShow” : null,<br>“label” : “移动开发”,<br>“name” : “移动开发”,<br>“orderby” : 2,<br>“parentid” : “1”,<br>“childrenTreeNodes” : [<br>        {<br>         “childrenTreeNodes” : null,<br>         “id” : “1-2-1”,<br>         “isLeaf” : null,<br>         “isShow” : null,<br>         “label” : “微信开发”,<br>         “name” : “微信开发”,<br>         “orderby” : 1,<br>         “parentid” : “1-2”<br>        }<br> }</p>
<p>设计一个树形结构的实体类来接收：</p>
<p>@Data<br>public class CourseCategoryTreeDto extends CourseCategory implements java.io.Serializable {<br>  <em><strong>*&#x2F;&#x2F;子节点*</strong></em><em><strong>*<br>*</strong></em>  List<CourseCategoryTreeDto> childrenTreeNodes;</CourseCategoryTreeDto></p>
<p>}</p>
<h3 id="1-2-4-接口开发"><a href="#1-2-4-接口开发" class="headerlink" title="*1.2.4 接口开发*"></a><em><strong>*1.2.4 接口开发*</strong></em></h3><p>① 在数据库里面，先进行树形表的查询验证，编写好对应的sql语句，好迁移到mybatis里面</p>
<p>固定层级</p>
<p>自连接 Inner join</p>
<p>非固定层级</p>
<p>​	使用with recursive的递归查询来实现</p>
<p>mysql递归相当于在存储过程中执行若干次sql语句，<em><strong>*java*</strong></em>****程序仅与数据库建立一次链接执行递归操作*<em><strong>，所以只要</strong></em>*控制好递归深度****，控制好数据量性能就没有问题。</p>
<p>② 持久层</p>
<p>public interface CourseCategoryMapper extends BaseMapper<CourseCategory> {<br>  <em><strong>*&#x2F;&#x2F;使用递归查询分类*</strong></em><em><strong>*<br>*</strong></em>  public List<CourseCategoryTreeDto> selectTreeNodes(String id);<br>}</CourseCategoryTreeDto></CourseCategory></p>
<mapper namespace="com.xuecheng.content.mapper.CourseCategoryMapper">



  <select id="selectTreeNodes" parametertype="string" resulttype="com.xuecheng.content.model.dto.CourseCategoryTreeDto">
    with recursive t1 as (
      select * from course_category where id=#{id}
      union all
      select t2.* from course_category t2 inner join t1 on t1.id = t2.parentid

<p>​    )<br>​    select * from t1<br>​    order by t1.id</p>
  </select>

</mapper>

 

<p>③ 业务层</p>
<p>参考源码</p>
<h3 id="1-2-5-最终效果"><a href="#1-2-5-最终效果" class="headerlink" title="*1.2.5 最终效果*"></a><em><strong>*1.2.5 最终效果*</strong></em></h3><p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps6.jpg" alt="img"> </p>
<h2 id="1-3-新增课程（完成的是课程基本信息、课程营销信息）"><a href="#1-3-新增课程（完成的是课程基本信息、课程营销信息）" class="headerlink" title="*1.3 新增课程（完成的是课程基本信息、课程营销信息）*"></a><em><strong>*1.3 新增课程（完成的是课程基本信息、课程营销信息）*</strong></em></h2><h3 id="1-3-1-需求分析"><a href="#1-3-1-需求分析" class="headerlink" title="*1.3.1 需求分析*"></a><em><strong>*1.3.1 需求分析*</strong></em></h3><p>涉及到要填写的内容：课程基本信息（包含课程图片信息）、课程营销信息、课程计划、课程师资信息</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps7.jpg" alt="img"> </p>
<p>① 当我们点击添加课程时，可以选择课程形式为****录播或直播****：</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps8.jpg" alt="img"> </p>
<p>② 进入课程信息添加页面</p>
<p>分为两部分：<em><strong>*课程基本信息、课程营销信息*</strong></em></p>
<p><em><strong>*课程基本信息“*</strong></em></p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps9.jpg" alt="img"> </p>
<p><em><strong>*课程营销信息：*</strong></em></p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps10.jpg" alt="img"> </p>
<p><em><strong>*填写完毕后，点击“保存并进行下一步“*</strong></em></p>
<p><em><strong>*③ 填写课程计划信息*</strong></em></p>
<p><em><strong>*可以添加 这个课程的*</strong></em>  <em><strong>*章节、章节下面的小节（每个小节要上传课程视频，用户点击小节 的标题就开始播放视频（录播），（直播类型的话）就直接进入直播间）*</strong></em></p>
<p>④ 最后 填写 课程师资信息</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps11.jpg" alt="img"> </p>
<p>这个 课程师资页面 可以维护该课程的授课老师</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps12.jpg" alt="img"> </p>
<h3 id="1-3-2-数据库表以及对应的实体类"><a href="#1-3-2-数据库表以及对应的实体类" class="headerlink" title="*1.3.2 数据库表以及对应的实体类*"></a><em><strong>*1.3.2 数据库表以及对应的实体类*</strong></em></h3><p>① 每个要添加的信息 所对应的数据库表</p>
<p>课程基本信息：scplus_content.course_base</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps13.jpg" alt="img"> </p>
<p>课程营销信息：xcplus_content.course_market</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps14.jpg" alt="img"> </p>
<p>课程计划：xcplus_content.teachplan</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps15.jpg" alt="img"> </p>
<p>课程师资信息：xcplus_content.course_teacher</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps16.jpg" alt="img"> </p>
<p>② 对应的实体类</p>
<p>课程基本信息：</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps17.jpg" alt="img"> </p>
<p>课程营销信息：</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps18.jpg" alt="img"> </p>
<p>课程计划信息：</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps19.jpg" alt="img"> </p>
<p>课程师资信息：</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps20.jpg" alt="img"> </p>
<h3 id="1-3-3-接口定义"><a href="#1-3-3-接口定义" class="headerlink" title="*1.3.3 接口定义*"></a><em><strong>*1.3.3 接口定义*</strong></em></h3><p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps21.jpg" alt="img"> </p>
<h3 id="1-3-4-接口开发"><a href="#1-3-4-接口开发" class="headerlink" title="*1.3.4 接口开发*"></a><em><strong>*1.3.4 接口开发*</strong></em></h3><p>看源码</p>
<h2 id="1-4-修改课程"><a href="#1-4-修改课程" class="headerlink" title="*1.4 修改课程*"></a><em><strong>*1.4 修改课程*</strong></em></h2><h3 id="1-4-1-需求分析"><a href="#1-4-1-需求分析" class="headerlink" title="*1.4.1 需求分析*"></a><em><strong>*1.4.1 需求分析*</strong></em></h3><p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps22.jpg" alt="img"> </p>
<p>点击 “编辑“，因为课程审核通过后方可发布，任何时候都 可以编辑，下图是编辑课程的界面： </p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps23.jpg" alt="img"> </p>
<p>修改成功自动进入课程计划编辑页面。</p>
<h3 id="1-4-2-数据模型"><a href="#1-4-2-数据模型" class="headerlink" title="*1.4.2 数据模型*"></a><em><strong>*1.4.2 数据模型*</strong></em></h3><p>要操作的表仍然是：课程信息基本表、课程营销表</p>
<h3 id="1-4-3-接口定义"><a href="#1-4-3-接口定义" class="headerlink" title="*1.4.3 接口定义*"></a><em><strong>*1.4.3 接口定义*</strong></em></h3><p>当点击编辑时，****首先要根据课程id查询课程信息****，查询出内容后回显在页面中</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps24.jpg" alt="img"> </p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps25.jpg" alt="img"> </p>
<h3 id="1-4-4-接口开发"><a href="#1-4-4-接口开发" class="headerlink" title="*1.4.4 接口开发*"></a><em><strong>*1.4.4 接口开发*</strong></em></h3><p>参考源码</p>
<h2 id="1-5-课程计划–查询"><a href="#1-5-课程计划–查询" class="headerlink" title="*1.5 课程计划–查询*"></a><em><strong>*1.5 课程计划–查询*</strong></em></h2><h3 id="1-5-1-需求分析"><a href="#1-5-1-需求分析" class="headerlink" title="*1.5.1 需求分析*"></a><em><strong>*1.5.1 需求分析*</strong></em></h3><p>当课程基本信息以及课程营销信息新增以后或者 ****课程信息修改成功****以后，会自动进入  <em><strong>*课程计划页面（课程的大纲目录页面）*</strong></em></p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps26.jpg" alt="img"> </p>
<p>一个课程计划小节对应一个视频，但是一个视频可以对应多个课程计划小节</p>
<h3 id="1-5-2-数据模型"><a href="#1-5-2-数据模型" class="headerlink" title="*1.5.2 数据模型*"></a><em><strong>*1.5.2 数据模型*</strong></em></h3><p>① 对应的数据库表是 teachplan</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps27.jpg" alt="img"> </p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps28.jpg" alt="img"> </p>
<p>② 媒资—教学计划  关联表 teachplan_media</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps29.jpg" alt="img"> </p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps30.jpg" alt="img"> </p>
<h3 id="1-5-3-接口定义"><a href="#1-5-3-接口定义" class="headerlink" title="*1.5.3 接口定义*"></a><em><strong>*1.5.3 接口定义*</strong></em></h3><p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps31.jpg" alt="img"> </p>
<h3 id="1-5-4-接口实现"><a href="#1-5-4-接口实现" class="headerlink" title="*1.5.4 接口实现*"></a><em><strong>*1.5.4 接口实现*</strong></em></h3><p>参考源码</p>
<h2 id="1-6-课程计划–增加-修改"><a href="#1-6-课程计划–增加-修改" class="headerlink" title="*1.6 课程计划–增加&#x2F;修改*"></a><em><strong>*1.6 课程计划–增加&#x2F;修改*</strong></em></h2><h3 id="1-6-1-需求分析"><a href="#1-6-1-需求分析" class="headerlink" title="*1.6.1 需求分析*"></a><em><strong>*1.6.1 需求分析*</strong></em></h3><p>课程计划的增加（增加的内容是有限的，比如说：视频还暂时不可以上传）</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps32.jpg" alt="img"> </p>
<p>点击“添加章”新增第一级课程计划。</p>
<p>新增成功自动刷新课程计划列表。</p>
<p>点击“添加小节”向某个第一级课程计划下添加小节。</p>
<p>新增成功自动刷新课程计划列表。</p>
<p>新增的课程计划自动排序到最后。</p>
<p>课程计划的修改</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps33.jpg" alt="img"> </p>
<p>点击“章”、“节”的名称，可以****修改名称*<em><strong>、</strong></em>*选择是否免费****。</p>
<h3 id="1-6-2-数据模型"><a href="#1-6-2-数据模型" class="headerlink" title="*1.6.2 数据模型*"></a><em><strong>*1.6.2 数据模型*</strong></em></h3><p>① 数据库表</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps34.jpg" alt="img"> </p>
<p>② 实体类</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps35.jpg" alt="img"> </p>
<h3 id="1-6-3-接口定义"><a href="#1-6-3-接口定义" class="headerlink" title="*1.6.3 接口定义*"></a><em><strong>*1.6.3 接口定义*</strong></em></h3><p>我们可以设置同一个接口来实现这三个功能：<em><strong>*一级章节的添加、二级章节的添加、一（二）级章节的更新。*</strong></em></p>
<p>同一个接口接收新增和修改两个业务请求，以<em><strong>*是否传递课程计划*</strong></em><em><strong>*id*</strong></em> 来判断是新增还是修改。</p>
<p>如果传递了课程计划id说明当前是要修改该课程计划，否则是新增一个课程计划。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps36.jpg" alt="img"> </p>
<p>定义接口如下：</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps37.jpg" alt="img"> </p>
<h3 id="1-6-4-接口实现"><a href="#1-6-4-接口实现" class="headerlink" title="*1.6.4 接口实现*"></a><em><strong>*1.6.4 接口实现*</strong></em></h3><p>参考源码</p>
<h2 id="1-7-课程计划–删除"><a href="#1-7-课程计划–删除" class="headerlink" title="*1.7 课程计划–删除*"></a><em><strong>*1.7 课程计划–删除*</strong></em></h2><h3 id="1-7-1-需求分析"><a href="#1-7-1-需求分析" class="headerlink" title="*1.7.1 需求分析*"></a><em><strong>*1.7.1 需求分析*</strong></em></h3><p>课程计划添加成功，如果课程还没有提交时可以删除课程计划。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps38.jpg" alt="img"> </p>
<p>删除第一级别的章时要求章下边没有小节方可删除。 </p>
<p>删除第二级别的小节的同时需要****将其它关联的视频信息****也删除。 </p>
<p>删除课程计划需要传输课程计划的id。</p>
<h3 id="1-7-2-数据模型"><a href="#1-7-2-数据模型" class="headerlink" title="*1.7.2 数据模型*"></a><em><strong>*1.7.2 数据模型*</strong></em></h3><p>① 数据库表</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps39.jpg" alt="img"> </p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps40.jpg" alt="img"> </p>
<p>② 实体类</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps41.jpg" alt="img"> </p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps42.jpg" alt="img"> </p>
<h3 id="1-7-3-接口定义"><a href="#1-7-3-接口定义" class="headerlink" title="*1.7.3 接口定义*"></a><em><strong>*1.7.3 接口定义*</strong></em></h3><p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps43.jpg" alt="img"> </p>
<p>根据课程计划的id查询出对应的课程计划信息，再根据grade判断是否为章节、小节；如果是小节，先去删除关联的媒体信息，再去删除小节信息；如果章节，先判断该章节下面的小节数量是否为0，0的话允许删除，否则报错。</p>
<h2 id="1-8-课程计划-上移、下移"><a href="#1-8-课程计划-上移、下移" class="headerlink" title="*1.8 课程计划-上移、下移*"></a><em><strong>*1.8 课程计划-上移、下移*</strong></em></h2><h3 id="1-8-1-需求分析"><a href="#1-8-1-需求分析" class="headerlink" title="*1.8.1 需求分析*"></a><em><strong>*1.8.1 需求分析*</strong></em></h3><p>课程计划新增后默认排在同级别最后，课程计划排序功能是可以灵活调整课程计划的显示顺序， </p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps44.jpg" alt="img"> </p>
<p>向上移动表示和上边的课程计划交换位置，将两个课程计划的排序字段值交换。 </p>
<p>向下移动表示和下边的课程计划交换位置，将两个课程计划的排序字段值交换。</p>
<h2 id="1-9-师资管理"><a href="#1-9-师资管理" class="headerlink" title="*1.9 师资管理*"></a><em><strong>*1.9 师资管理*</strong></em></h2><h3 id="1-9-1-需求分析"><a href="#1-9-1-需求分析" class="headerlink" title="*1.9.1 需求分析*"></a><em><strong>*1.9.1 需求分析*</strong></em></h3><p>课程计划界面点击下一步进入教师管理界面：</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps45.jpg" alt="img"> </p>
<p>点击添加教师打开添加界面，如下图，不用实现上传照片：</p>
<p>① 添加教师（一个课程可以添加多个教师）</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps46.jpg" alt="img"> </p>
<p>添加成功后，立即进行查询教师的操作</p>
<p>② 修改教师信息</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps47.jpg" alt="img"> </p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps48.jpg" alt="img"> </p>
<p>③ 删除该课程的教师</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps49.jpg" alt="img"> </p>
<h3 id="1-9-2-数据模型"><a href="#1-9-2-数据模型" class="headerlink" title="*1.9.2 数据模型*"></a><em><strong>*1.9.2 数据模型*</strong></em></h3><p>① 数据库表</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps50.jpg" alt="img"> </p>
<h3 id="1-9-3-接口定义以及实现"><a href="#1-9-3-接口定义以及实现" class="headerlink" title="*1.9.3 接口定义以及实现*"></a><em><strong>*1.9.3 接口定义以及实现*</strong></em></h3><p>自己想</p>
<h2 id="1-10-删除课程"><a href="#1-10-删除课程" class="headerlink" title="*1.10 删除课程*"></a><em><strong>*1.10 删除课程*</strong></em></h2><h3 id="1-10-1-需求分析"><a href="#1-10-1-需求分析" class="headerlink" title="*1.10.1 需求分析*"></a><em><strong>*1.10.1 需求分析*</strong></em></h3><p>****课程的审核状态*<em><strong>为</strong></em>*未提交****时方可删除。 </p>
<p>删除课程需要删除****课程相关的基本信息*<em><strong>、</strong></em>*营销信息*<em><strong>、</strong></em>*课程计划*<em><strong>、</strong></em>*课程教师信息****。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps51.jpg" alt="img"> </p>
<h3 id="1-10-2-数据模型"><a href="#1-10-2-数据模型" class="headerlink" title="*1.10.2 数据模型*"></a><em><strong>*1.10.2 数据模型*</strong></em></h3><p>① 数据库表</p>
<p>Course_base、course_market、teachplan、teachplan_media、course_teacher</p>
<h3 id="1-10-3-接口定义和实现"><a href="#1-10-3-接口定义和实现" class="headerlink" title="*1.10.3 接口定义和实现*"></a><em><strong>*1.10.3 接口定义和实现*</strong></em></h3><p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps52.jpg" alt="img"> </p>
<h1 id="2、媒资管理系统"><a href="#2、媒资管理系统" class="headerlink" title="*2、媒资管理系统*"></a><em><strong>*2、媒资管理系统*</strong></em></h1><h2 id="2-1-模块需求分析"><a href="#2-1-模块需求分析" class="headerlink" title="*2.1 模块需求分析*"></a><em><strong>*2.1 模块需求分析*</strong></em></h2><h3 id="2-1-1-模块介绍"><a href="#2-1-1-模块介绍" class="headerlink" title="*2.1.1 模块介绍*"></a><em><strong>*2.1.1 模块介绍*</strong></em></h3><p>每个教学机构都可以在媒资系统管理自己的教学资源，包括：视频、教案等文件。</p>
<p>目前媒资管理的主要管理对象是****视频、图片、文档****等，包括：媒资文件的查询、文件上传、视频处理等。</p>
<h3 id="2-1-2-业务流程"><a href="#2-1-2-业务流程" class="headerlink" title="*2.1.2 业务流程*"></a><em><strong>*2.1.2 业务流程*</strong></em></h3><h4 id="1-2-1-上传图片"><a href="#1-2-1-上传图片" class="headerlink" title="*1.2.1 上传图片*"></a><em><strong>*1.2.1 上传图片*</strong></em></h4><p>教学机构人员在 <em><strong>*课程信息编辑页面*</strong></em> 上传课程图片，课程图片统一记录在媒资管理系统。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps53.jpg" alt="img"> </p>
<h4 id="1-2-2-上传视频"><a href="#1-2-2-上传视频" class="headerlink" title="*1.2.2 上传视频*"></a><em><strong>*1.2.2 上传视频*</strong></em></h4><p>1、教学机构人员进入媒资管理列表查询自己上传的媒资文件。</p>
<p>点击<em><strong>*“*</strong></em><em><strong>*媒资管理*</strong></em><em><strong>*”*</strong></em></p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps54.jpg" alt="img"> </p>
<p>进入媒资管理列表页面查询本机构上传的媒资文件。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps55.jpg" alt="img"> </p>
<p>2、教育机构用户在”媒资管理”页面中点击 <em><strong>*“*</strong></em><em><strong>*上传视频*</strong></em>“ 按钮。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps56.jpg" alt="img"> </p>
<p>点击<em><strong>*“*</strong></em><em><strong>*上传视频*</strong></em>****”****打开上传页面:</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps57.jpg" alt="img"> </p>
<p>3、选择要上传的文件，自动执行文件上传，视频上传成功会自动处理。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps58.jpg" alt="img"> </p>
<h4 id="1-2-3-处理视频"><a href="#1-2-3-处理视频" class="headerlink" title="*1.2.3 处理视频*"></a><em><strong>*1.2.3 处理视频*</strong></em></h4><p>对需要转码处理的视频系统会自动对其处理，处理后生成视频的URL。</p>
<p>处理视频没有用户界面，完全是后台自动执行。</p>
<h4 id="1-2-4-审核媒资"><a href="#1-2-4-审核媒资" class="headerlink" title="*1.2.4 审核媒资*"></a><em><strong>*1.2.4 审核媒资*</strong></em></h4><p>审核媒资包括程序自动审核和人工审核，程序可以通过鉴黄接口(<a target="_blank" rel="noopener" href="https://www.aliyun.com/product/lvwang?spm=5176.19720258.J_3207526240.51.e93976f4rSq796)%E5%AE%A1%E6%A0%B8%E8%A7%86%E9%A2%91%EF%BC%8C%E5%AF%B9%E6%9C%89%E5%BC%82%E8%AE%AE%E7%9A%84%E8%A7%86%E9%A2%91%E7%94%B1%E4%BA%BA%E5%B7%A5%E8%BF%9B%E8%A1%8C%E5%AE%A1%E6%A0%B8%E3%80%82">https://www.aliyun.com/product/lvwang?spm=5176.19720258.J_3207526240.51.e93976f4rSq796)审核视频，对有异议的视频由人工进行审核。</a></p>
<p>1.****运营用户****登入运营平台并进入媒资管理页面，查找待审核媒资</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps59.jpg" alt="img"> </p>
<p>2.点击列表中媒资名称链接，可预览该媒资，若是视频，则播放视频。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps60.jpg" alt="img"> </p>
<p>3.点击列表中某媒资后的”审核” 按钮，既完成媒资的审批过程。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps61.jpg" alt="img"> </p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps62.jpg" alt="img"> </p>
<h4 id="1-2-5-绑定媒资"><a href="#1-2-5-绑定媒资" class="headerlink" title="*1.2.5 绑定媒资*"></a><em><strong>*1.2.5 绑定媒资*</strong></em></h4><p>课程计划创建好后需要绑定媒资文件，比如：如果课程计划绑定了视频文件，进入课程在线学习界面后点课程计划名称则在线播放视频。如下图：</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps63.jpg" alt="img"> </p>
<p>如何将课程计划绑定媒资呢？</p>
<p>1.教育机构用户进入课程管理页面并编辑某一个课程，在”课程大纲”标签页的某一小节后可点击”添加视频“。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps64.jpg" alt="img"> </p>
<p>2.弹出添加视频对话框，可通过视频关键字搜索已审核通过的视频媒资。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps65.jpg" alt="img"> </p>
<p>3.选择视频媒资，点击提交按钮，完成课程计划绑定媒资流程。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps66.jpg" alt="img"> </p>
<p>课程计划关联视频后如下图：</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps67.jpg" alt="img"> </p>
<h3 id="2-1-3-数据模型"><a href="#2-1-3-数据模型" class="headerlink" title="*2.1.3 数据模型*"></a><em><strong>*2.1.3 数据模型*</strong></em></h3><p>① 数据库表</p>
<p>Media_files：媒资文件表</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps68.jpg" alt="img"> </p>
<p>media_process_history: 视频处理历史表，记录已经处理成功的视频信息。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps69.jpg" alt="img"> </p>
<h2 id="2-2-搭建nacos和网关"><a href="#2-2-搭建nacos和网关" class="headerlink" title="*2.2 搭建nacos和网关*"></a><em><strong>*2.2 搭建nacos和网关*</strong></em></h2><h3 id="2-2-1-为什么用nacos和gateway？"><a href="#2-2-1-为什么用nacos和gateway？" class="headerlink" title="*2.2.1 为什么用nacos和gateway？*"></a><em><strong>*2.2.1 为什么用nacos和gateway？*</strong></em></h3><p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps70.jpg" alt="img"> </p>
<p>后期还会添加更多的微服务，当前这种****由前端直接请求微服务的方式****存在弊端：</p>
<p>如果在****前端对每个请求地址都配置绝对路径，非常不利于系统维护****，比如下边代码中请求系统管理服务的地址使用的是localhost：</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps71.jpg" alt="img"> </p>
<p>当系统上线后这里需要改成公网的域名，如果这种地址非常多则非常麻烦。基于这个问题可以****采用网关****来解决，如下图：</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps72.jpg" alt="img"> </p>
<p>这样在前端的代码中只需要指定每个接口的相对路径，如下所示：</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps73.jpg" alt="img"> </p>
<p>在前端代码的一个固定的地方在接口地址前统一加网关的地址，每个请求统一到网关，由网关将请求转发到具体的微服务。</p>
<p>网关：请求的路由转发、负载均衡</p>
<p>项目采用****Spring Cloud Gateway****作为 网关，网关在请求路由时需要知道每个微服务实例的地址，项目使用Nacos作用服务发现中心和配置中心，整体的架构图如下：</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps74.jpg" alt="img"> </p>
<h3 id="2-2-2-搭建nacos（不用看。。。。）"><a href="#2-2-2-搭建nacos（不用看。。。。）" class="headerlink" title="*2.2.2 搭建nacos（不用看。。。。）*"></a><em><strong>*2.2.2 搭建nacos（不用看。。。。）*</strong></em></h3><h4 id="服务发现中心"><a href="#服务发现中心" class="headerlink" title="*服务发现中心*"></a><em><strong>*服务发现中心*</strong></em></h4><p>首先搭建 <em><strong>*Nacos*</strong></em>****服务发现中心****。</p>
<p>在搭建Nacos服务发现中心之前需要搞清楚两个概念：namespace和group</p>
<p>namespace：用于区分环境、比如：开发环境、测试环境、生产环境。</p>
<p>group：用于区分项目，比如：xuecheng-plus项目、xuecheng2.0项目</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps75.jpg" alt="img"> </p>
<p>① 首先完成各服务注册到Naocs，下边将内容管理服务注册到nacos中。</p>
<p>\1) 在xuecheng-plus-parent中添加依赖管理 </p>
<p>XML <dependency>   <groupId>com.alibaba.cloud</groupId>   <artifactId>spring-cloud-alibaba-dependencies</artifactId>   <version>${spring-cloud-alibaba.version}</version>   <type>pom</type>   <scope>import</scope> </dependency></p>
<p>2）在内容管理模块的接口工程、系统管理模块的接口工程中添加如下依赖</p>
<p>XML <dependency>   <groupId>com.alibaba.cloud</groupId>   <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId> </dependency></p>
<p>3）配置nacos的地址</p>
<p>在系统管理的接口工程的配置文件中配置如下信息：</p>
<p>YAML #微服务配置 spring:  application:   name: system-service  cloud:   nacos:    server-addr: 192.168.101.65:8848    discovery:     namespace: dev     group: xuecheng-plus-project</p>
<p>在内容管理的接口工程的配置文件中配置如下信息：</p>
<p>YAML spring:  application:   name: content-api  cloud:   nacos:    server-addr: 192.168.101.65:8848    discovery:     namespace: dev     group: xuecheng-plus-project</p>
<p>4）重启内容管理服务、系统管理服务。</p>
<p>待微服务启动成功，进入Nacos服务查看服务列表</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps76.jpg" alt="img"> </p>
<p>在 “开发环境” 命名空间下有两个服务这说明内容管理微服务和系统管理微服务在Nacos注册成功。</p>
<p>点击其它一个微服务的“详情”</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps77.png" alt="img"> </p>
<p>通过上图可以查看微服务实例的地址。</p>
<h4 id="配置中心"><a href="#配置中心" class="headerlink" title="*配置中心*"></a><em><strong>*配置中心*</strong></em></h4><p>目的就是通过Nacos去管理项目的所有配置。</p>
<p>先将项目中的配置文件进行  ****分类****：</p>
<p>1、每个项目特有的配置</p>
<p>是指该配置只在有些项目中需要配置，或者该配置在每个项目中配置的值不同。</p>
<p>比如：spring.application.name每个项目都需要配置但值不一样，以及有些项目需要连接数据库而有些项目不需要，有些项目需要配置消息队列而有些项目不需要。</p>
<p>2、项目所公用的配置</p>
<p>是指在若干项目中配置内容相同的配置。比如：redis的配置，很多项目用的同一套redis服务所以配置也一样。</p>
<p>另外还需要知道<em><strong>*nacos*</strong></em>****如何去定位一个具体的配置文件****，即：namespace、group、dataid. </p>
<p>1、通过namespace、group找到具体的环境和具体的项目。</p>
<p>2、通过dataid找到具体的配置文件，dataid有三部分组成</p>
<p>比如：content-service-dev.yaml配置文件  由（content-service）-（dev）. (yaml)三部分组成</p>
<p>content-service：第一部分，它是在application.yaml中配置的应用名，即****spring.application.name****的值。</p>
<p>dev：第二部分，它是环境名，通过****spring.profiles.active****指定，</p>
<p>Yaml: 第三部分，它是****配置文件 的后缀****，目前nacos支持properties、yaml等格式类型，本项目选择yaml格式类型。</p>
<p>所以，如果我们要配置content-service工程的配置文件:</p>
<p>在开发环境中配置content-service-dev.yaml</p>
<p>在测试环境中配置content-service-test.yaml</p>
<p>在生产环境中配置content-service-prod.yaml</p>
<p>我们启动项目中传入spring.profiles.active的参数决定引用哪个环境的配置文件，例如：传入spring.profiles.active&#x3D;dev表示使用dev环境的配置文件即content-service-dev.yaml。</p>
<p>。。。。。。。</p>
<p>参考原文档</p>
<h3 id="2-2-3-搭建GateWay"><a href="#2-2-3-搭建GateWay" class="headerlink" title="*2.2.3 搭建GateWay*"></a><em><strong>*2.2.3 搭建GateWay*</strong></em></h3><p>① 创建module</p>
<p>本项目使用Spring Cloud Gateway作为网关，下边创建网关工程。新建一个网关工程。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps78.jpg" alt="img"> </p>
<p>工程结构如下：</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps79.jpg" alt="img"> </p>
<p>② 添加依赖</p>
<p>XML <parent>   <groupId>com.xuecheng</groupId>   <artifactId>xuecheng-plus-parent</artifactId>   <version>0.0.1-SNAPSHOT</version>   <relativePath>..&#x2F;xuecheng-plus-parent</relativePath> </parent> <artifactId>xuecheng-plus-gateway</artifactId>  <dependencies>    <!--网关-->   <dependency>     <groupId>org.springframework.cloud</groupId>     <artifactId>spring-cloud-starter-gateway</artifactId>   </dependency>    <!--服务发现中心-->   <dependency>     <groupId>com.alibaba.cloud</groupId>     <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>   </dependency>   <dependency>     <groupId>com.alibaba.cloud</groupId>     <artifactId>spring-cloud-starter-alibaba-nacos-config</artifactId>   </dependency>   <dependency>     <groupId>com.alibaba</groupId>     <artifactId>fastjson</artifactId>   </dependency>   <dependency>     <groupId>org.projectlombok</groupId>     <artifactId>lombok</artifactId>   </dependency>   <!-- 排除 Spring Boot 依赖的日志包冲突 -->   <dependency>     <groupId>org.springframework.boot</groupId>     <artifactId>spring-boot-starter</artifactId>     <exclusions>       <exclusion>         <groupId>org.springframework.boot</groupId>         <artifactId>spring-boot-starter-logging</artifactId>       </exclusion>     </exclusions>   </dependency>    <!-- Spring Boot 集成 log4j2 -->   <dependency>     <groupId>org.springframework.boot</groupId>     <artifactId>spring-boot-starter-log4j2</artifactId>   </dependency>   </dependencies></p>
<p>③ 配置yaml文件，进行服务注册、配置中心</p>
<p>YAML #微服务配置 spring:  application:   name: gateway  cloud:   nacos:    server-addr: 192.168.101.65:8848    discovery:     namespace: dev     group: xuecheng-plus-project    config:     namespace: dev     group: xuecheng-plus-project     file-extension: yaml     refresh-enabled: true     shared-configs:      - data-id: logging-${spring.profiles.active}.yaml       group: xuecheng-plus-common       refresh: true  profiles:   active: dev</p>
<p>④ 在网关对应的nacos配置文件中****配置网关路由策略****：</p>
<p>详细配置如下：</p>
<p>YAML server:  port: 63010 # 网关端口 spring:  cloud:   gateway: #    filter: #     strip-prefix: #      enabled: true    routes: # 网关路由配置     - id: content-api # 路由id，自定义，只要唯一即可      # uri: <a target="_blank" rel="noopener" href="http://127.0.0.1:8081/">http://127.0.0.1:8081</a> # 路由的目标地址 http就是固定地址      uri: lb:&#x2F;&#x2F;content-api # 路由的目标地址 lb就是负载均衡，后面跟服务名称      predicates: # 路由断言，也就是判断请求是否符合路由规则的条件       - Path&#x3D;&#x2F;content&#x2F;** # 这个是按照路径匹配，只要以&#x2F;content&#x2F;开头就符合要求     - id: system-api      # uri: <a target="_blank" rel="noopener" href="http://127.0.0.1:8081/">http://127.0.0.1:8081</a>      uri: lb:&#x2F;&#x2F;system-api      predicates:       - Path&#x3D;&#x2F;system&#x2F;**     - id: media-api      # uri: <a target="_blank" rel="noopener" href="http://127.0.0.1:8081/">http://127.0.0.1:8081</a>      uri: lb:&#x2F;&#x2F;media-api      predicates:       - Path&#x3D;&#x2F;media&#x2F;**</p>
<h2 id="2-3-分布式文件系统"><a href="#2-3-分布式文件系统" class="headerlink" title="*2.3 分布式文件系统*"></a><em><strong>*2.3 分布式文件系统*</strong></em></h2><h3 id="2-3-1-什么是分布式文件系统？"><a href="#2-3-1-什么是分布式文件系统？" class="headerlink" title="*2.3.1 什么是分布式文件系统？*"></a><em><strong>*2.3.1 什么是分布式文件系统？*</strong></em></h3><p>一台计算机无法存储海量的文件，通过网络将若干计算机组织起来，去存储海量的文件并且接受海量用户的请求。这些计算机之间可以进行相互通信</p>
<p>​	好处：</p>
<p>​	多台计算机处理能力更强；集群；每台计算机放在不同的地域，用户就可以就近访问，提高访问速度。</p>
<h3 id="2-3-2-常见的分布式文件系统（技术选型的问题）"><a href="#2-3-2-常见的分布式文件系统（技术选型的问题）" class="headerlink" title="*2.3.2 常见的分布式文件系统（技术选型的问题）*"></a><em><strong>*2.3.2 常见的分布式文件系统（技术选型的问题）*</strong></em></h3><p>NFS：unix系统中使用最广泛的网络文件系统，允许多个客户端共享公共文件系统，主从结构</p>
<p>GoogleFs：主从结构；用于大型的、大量数据的应用；容错率高</p>
<p>HDFS：主从结构，类似于GFS</p>
<p>阿里云的OSS：各方面都很好，安全性、容错率，但是需要花钱</p>
<h3 id="2-3-3-MinIO"><a href="#2-3-3-MinIO" class="headerlink" title="*2.3.3 MinIO*"></a><em><strong>*2.3.3 MinIO*</strong></em></h3><h4 id="特点？为什么选用他？"><a href="#特点？为什么选用他？" class="headerlink" title="*特点？为什么选用他？*"></a><em><strong>*特点？为什么选用他？*</strong></em></h4><p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps80.jpg" alt="img"> </p>
<p>① 轻量级、操作简单、适合于存储大容量的非结构化数据，支持java\python等多种语言</p>
<p>② 去中心化共享架构，每个节点都是对等关系。同时采用纠删码技术恢复丢失和损坏数据，即便丢失一半数量（N&#x2F;2）的硬盘，仍然可以恢复数据。 比如上边集合中有4个以内的硬盘损害仍可保证数据恢复，不影响上传和下载</p>
<p>③ 避免单点故障</p>
<h4 id="MinIO的上传、删除、查询操作"><a href="#MinIO的上传、删除、查询操作" class="headerlink" title="*MinIO的上传、删除、查询操作*"></a><em><strong>*MinIO的上传、删除、查询操作*</strong></em></h4><p>参考原文档</p>
<h2 id="2-4-上传图片"><a href="#2-4-上传图片" class="headerlink" title="*2.4 上传图片*"></a><em><strong>*2.4 上传图片*</strong></em></h2><h3 id="2-4-1-需求分析"><a href="#2-4-1-需求分析" class="headerlink" title="*2.4.1 需求分析*"></a><em><strong>*2.4.1 需求分析*</strong></em></h3><p>课程图片是宣传课程非常重要的信息，在新增课程界面****上传课程图片*<em><strong>，也可以</strong></em>*修改课程图片****。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps81.jpg" alt="img"> </p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps82.jpg" alt="img"> </p>
<h3 id="2-4-2-数据模型"><a href="#2-4-2-数据模型" class="headerlink" title="*2.4.2 数据模型*"></a><em><strong>*2.4.2 数据模型*</strong></em></h3><p>① 数据库表（媒资数据库的文件表、内容管理库数据库的课程信息表）</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps83.jpg" alt="img"> </p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps84.jpg" alt="img"> </p>
<p>② 实体类</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps85.jpg" alt="img"> </p>
<h3 id="2-4-3-接口定义"><a href="#2-4-3-接口定义" class="headerlink" title="*2.4.3 接口定义*"></a><em><strong>*2.4.3 接口定义*</strong></em></h3><p>此接口定义为一个通用的上传文档接口，可以上传图片或其它文档。</p>
<p>首先分析接口：</p>
<p>① 请求：</p>
<p>请求地址：&#x2F;media&#x2F;upload&#x2F;coursefile</p>
<p>请求内容：<strong>Content-Type:</strong> multipart&#x2F;form-data;</p>
<p>form-data; name&#x3D;”filedata”; filename&#x3D;”具体的文件名称”</p>
<p>② 响应：</p>
<p>响应参数：文件信息，如下</p>
<p>JSON {  “id”: “a16da7a132559daf9e1193166b3e7f52”,  “companyId”: 1232141425,  “companyName”: null,  “filename”: “1.jpg”,  “fileType”: “001001”,  “tags”: “”,  “bucket”: “&#x2F;testbucket&#x2F;2022&#x2F;09&#x2F;12&#x2F;a16da7a132559daf9e1193166b3e7f52.jpg”,  “fileId”: “a16da7a132559daf9e1193166b3e7f52”,  “url”: “&#x2F;testbucket&#x2F;2022&#x2F;09&#x2F;12&#x2F;a16da7a132559daf9e1193166b3e7f52.jpg”,  “timelength”: null,  “username”: null,  “createDate”: “2022-09-12T21:57:18”,  “changeDate”: null,  “status”: “1”,  “remark”: “”,  “auditStatus”: null,  “auditMind”: null,  “fileSize”: 248329 }</p>
<p>响应模型类Dto</p>
<p>定义上传响应模型类：</p>
<p>Java  @Data public class UploadFileResultDto extends MediaFiles {    }</p>
<p>③ 控制层接口</p>
<p>定义接口如下：</p>
<p>Java @ApiOperation(“上传文件”) @RequestMapping(value &#x3D; “&#x2F;upload&#x2F;coursefile”, consumes &#x3D; MediaType.MULTIPART_FORM_DATA_VALUE) public UploadFileResultDto upload(@RequestPart(“filedata”) MultipartFile upload) throws IOException {    return null; }</p>
<h3 id="2-4-4-接口开发"><a href="#2-4-4-接口开发" class="headerlink" title="*2.4.4 接口开发*"></a><em><strong>*2.4.4 接口开发*</strong></em></h3><p>参考源码</p>
<h2 id="2-5-上传视频（重点）"><a href="#2-5-上传视频（重点）" class="headerlink" title="*2.5 上传视频（重点）*"></a><em><strong>*2.5 上传视频（重点）*</strong></em></h2><h3 id="2-5-1-需求分析"><a href="#2-5-1-需求分析" class="headerlink" title="*2.5.1 需求分析*"></a><em><strong>*2.5.1 需求分析*</strong></em></h3><p>1、教学机构人员进入媒资管理列表查询自己上传的媒资文件。</p>
<p>点击<em><strong>*“*</strong></em><em><strong>*媒资管理*</strong></em><em><strong>*”*</strong></em></p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps86.jpg" alt="img"> </p>
<p>进入****媒资管理列表****页面查询本机构上传的媒资文件（包括视频、图片、文件）：</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps87.jpg" alt="img"> </p>
<p>2、教育机构用户在”媒资管理”页面中点击 “<em><strong>*上传视频*</strong></em>“ 按钮。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps88.jpg" alt="img"> </p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps89.jpg" alt="img"> </p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps90.jpg" alt="img"> </p>
<p>4、视频****上传成功会自动处理****，处理完成可以预览视频。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps91.jpg" alt="img"> </p>
<h3 id="2-5-2-断点续传技术（重点，-简历上要写得-）"><a href="#2-5-2-断点续传技术（重点，-简历上要写得-）" class="headerlink" title="*2.5.2 断点续传技术（重点，**简历上要写得**）*"></a><em><strong>*2.5.2 断点续传技术（重点，*</strong></em><em><strong>*简历上要写得*</strong></em><em><strong>*）*</strong></em></h3><h4 id="①-什么是断点续传技术？"><a href="#①-什么是断点续传技术？" class="headerlink" title="*① 什么是断点续传技术？*"></a><em><strong>*① 什么是断点续传技术？*</strong></em></h4><p>媒资管理系统中会传递内存较大的视频，当用户上传或者下载视频的时候，如果因为网络抖动、硬件问题导致上传到一半失败了。那么就为了避免用户重头开始上传文件，用户体验差</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps92.jpg" alt="img"> </p>
<h4 id="②-视频上传流程"><a href="#②-视频上传流程" class="headerlink" title="*② 视频上传流程*"></a><em><strong>*② 视频上传流程*</strong></em></h4><p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps93.jpg" alt="img"> </p>
<p>****分块存放的目录路径****为：桶video + fileMd5的第一位 + fileMd5的第二位 + fileMd5 + chunk</p>
<p>合并文件存放的目录路径为：桶video + fileMd5的第一位 + fileMd5的第二位 + fileMd5</p>
<p>① 检查文件是否已经上传过了，即是否存在于****数据库*<em><strong>和</strong></em>*MinIO****中了</p>
<p>​	根据文件对应的md5值去数据库里面查找该文件，然后再去MinIO中根据文件存放的路径去查找是否已经存在该文件</p>
<p>② 前端进行分块，并检查文件分块是否已经上传了，及是否存在于MinIO中</p>
<p>​	根据前端传送过来的分块文件、fileMd5（之所以上传这个md5值是因为确定分块文件存放的目录路径）和chunkNum第几块来确定分块是否已经上传到MinIo中了。</p>
<p>③ 依次上传各个分块到MinIO中</p>
<p>​	前端传递：要上传的分块文件（先是上传到本地服务器上，还需要再次上传到MinIO）、fileMd5（为了确定分块在MInIO存放的路径）、chunkNum当前分块序号</p>
<p>​	 </p>
<p>④ 等所有的分块都已经上传成功后，在进行<em><strong>*对所有分块的合并*</strong></em></p>
<p>​	前端传递：fileMd5（确定分块文件在MinIo中的路径）、fileName（上传的原始文件名，存放到媒体文件数据库中）、chunkTotal（确定要合并的分块的个数）</p>
<p>​	具体流程：<em><strong>*找到所有的分块文件，在进行合并，合并的文件在MinIO中*<em><strong>；</strong></em>*校验合并后的文件和源文件是否一致*<em><strong>（先从MinIo下载合并好的文件，转化成流在计算其对应的md5值，与原始文件的md5值比较）；</strong></em>*校验成功以后，将文件信息入库*</strong></em></p>
<h2 id="2-6-视频处理技术（重点，简历上要写得）"><a href="#2-6-视频处理技术（重点，简历上要写得）" class="headerlink" title="*2.6 视频处理技术（重点，简历上要写得）*"></a><em><strong>*2.6 视频处理技术（重点，简历上要写得）*</strong></em></h2><h3 id="2-6-1-需求分析"><a href="#2-6-1-需求分析" class="headerlink" title="*2.6.1 需求分析*"></a><em><strong>*2.6.1 需求分析*</strong></em></h3><p>考虑到一些类似avi格式的视频只能能在iphone上面播放，将其转化为mp3、mp4这种通用的播放格式。</p>
<p>本项目使用FFmpeg来对视频进行编码，我们通过java程序中的ProcessBuilder去调用外部程序ffmpeg来完成</p>
<h3 id="2-6-2-分布式任务调度"><a href="#2-6-2-分布式任务调度" class="headerlink" title="*2.6.2 分布式任务调度*"></a><em><strong>*2.6.2 分布式任务调度*</strong></em></h3><p>目的：如何高效的处理一批任务？	</p>
<p>① 利用单机的多线程</p>
<p>② 利用 多台主机 + 多线程</p>
<h4 id="XXL-LOB"><a href="#XXL-LOB" class="headerlink" title="*XXL-LOB*"></a><em><strong>*XXL-LOB*</strong></em></h4><p>① xxl-job是一个轻量级的分布式任务调度平台，组成：调度中心 + 执行器 + 任务</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps94.jpg" alt="img"> </p>
<h3 id="2-6-3-技术方案"><a href="#2-6-3-技术方案" class="headerlink" title="*2.6.3 技术方案*"></a><em><strong>*2.6.3 技术方案*</strong></em></h3><h4 id="保证任务不会被重复执行"><a href="#保证任务不会被重复执行" class="headerlink" title="*保证任务不会被重复执行*"></a><em><strong>*保证任务不会被重复执行*</strong></em></h4><p>作业分片方案仅实现了每个执行器之间执行的任务不相同的，但是一个执行器在处理一个视频还没有完成时，此时调度中心有一次请求调度，为了不重复处理同一个视频，进行的考虑：</p>
<p><em><strong>*① 配置调度过期策略：*</strong></em></p>
<p>配置调度过期策略、阻塞处理策略</p>
<p><em><strong>*② 保证幂等性：解决重复提交问题（重复刷单、重复支付）*</strong></em></p>
<p>1）数据库约束，比如：唯一索引，主键。</p>
<p>2）乐观锁，常用于数据库，更新数据时根据乐观锁状态去更新。</p>
<p>3）唯一序列号，操作传递一个唯一序列号，操作时判断与该序列号相等则执行。</p>
<p>解决策略：在视频处理表中设置一个字段—视频处理状态字段（处理中，处理完成，未处理），如果是处理中和处理完成，就不再进行处理视频</p>
<h4 id="视频处理方案"><a href="#视频处理方案" class="headerlink" title="*视频处理方案*"></a><em><strong>*视频处理方案*</strong></em></h4><p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps95.jpg" alt="img"> </p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps96.jpg" alt="img"> </p>
<h3 id="2-6-4-待处理视频任务的添加和查询"><a href="#2-6-4-待处理视频任务的添加和查询" class="headerlink" title="*2.6.4 待处理视频任务的添加和查询*"></a><em><strong>*2.6.4 待处理视频任务的添加和查询*</strong></em></h3><h4 id="需求分析"><a href="#需求分析" class="headerlink" title="*需求分析*"></a><em><strong>*需求分析*</strong></em></h4><p>待处理任务实际上就是：视频分块合并以后，从MiniO下载下来校验其md5值和原始文件的md5值，校验通过后，再将其文件信息存入到媒资文件信息表media_files中，通过视频的mineType字段判断上传的视频是否为avi对应的格式，是的话，将其添加到媒资处理表media_process中作为待处理任务；</p>
<h4 id="添加待处理视频任务"><a href="#添加待处理视频任务" class="headerlink" title="*添加待处理视频任务*"></a><em><strong>*添加待处理视频任务*</strong></em></h4><p>上传视频成功向视频处理待处理表添加记录，暂时只添加对avi视频的处理记录。</p>
<p>根据MIME Type去判断是否是avi视频，下边列出部分MIME Type</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps97.png" alt="img"> </p>
<p>avi视频的MIME Type是video&#x2F;x-msvideo</p>
<h4 id="查询待处理视频任务"><a href="#查询待处理视频任务" class="headerlink" title="*查询待处理视频任务*"></a><em><strong>*查询待处理视频任务*</strong></em></h4><p>在媒资管理模块中，已经上传了一些视频为avi的，那么在这个待处理视频表media_process中就会存在对应的任务。</p>
<p>那么如何保证 <em><strong>*每个文件处理服务*</strong></em> 查询到的待处理视频任务 是互不相同的？</p>
<p>主要通过编写自定义的sql语句进行分片的筛选：</p>
<p>****查询条件****：处理状态status为 ****未处理或者处理失败****，处理失败次数 &lt; 3的待处理视频任务</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps98.jpg" alt="img"> </p>
<h3 id="2-6-5-待处理视频任务执行前的判断-—-使用分布式锁"><a href="#2-6-5-待处理视频任务执行前的判断-—-使用分布式锁" class="headerlink" title="*2.6.5 待处理视频任务执行前的判断**—**使用分布式锁*"></a><em><strong>*2.6.5 待处理视频任务执行前的判断*</strong></em><em><strong>*—*</strong></em><em><strong>*使用分布式锁*</strong></em></h3><h4 id="为什么要用到这个分布式锁？"><a href="#为什么要用到这个分布式锁？" class="headerlink" title="*为什么要用到这个分布式锁？*"></a><em><strong>*为什么要用到这个分布式锁？*</strong></em></h4><p>存在  多个多个执行器处理同一个视频任务的场景，比如说一开始分片是4个，因为xxl-job这边类型的分布式调度平台支持动态扩容，那么如果有一两个执行器挂掉，按照分片的逻辑，就可能原来的3\4分片变为0,1分片，第二次拿到0,1分片的这个待处理视频。这样就存在一个风险：多个微服务实例处理同一个待处理视频</p>
<p>常规的synchronized只能保证同一个虚拟机中多个线程去争抢锁,所以使用到这个分布式锁。</p>
<h4 id="常见的分布式锁方案"><a href="#常见的分布式锁方案" class="headerlink" title="*常见的分布式锁方案*"></a><em><strong>*常见的分布式锁方案*</strong></em></h4><p>1、基于数据库实现分布锁</p>
<p>利用数据库主键唯一性的特点，或利用数据库唯一索引、行级锁的特点，多个线程同时去更新相同的记录，谁更新成功谁就抢到锁。</p>
<p>2、基于redis实现锁</p>
<p>redis提供了分布式锁的实现方案，比如：SETNX、set nx、redisson等。</p>
<p>拿SETNX举例说明，SETNX命令的工作过程是去set一个不存在的key，多个线程去设置同一个key只会有一个线程设置成功，设置成功的的线程拿到锁。</p>
<p>3、使用zookeeper实现</p>
<p>zookeeper是一个分布式协调服务，主要解决分布式程序之间的同步的问题。zookeeper的结构类似的文件目录，多线程向zookeeper创建一个子目录(节点)只会有一个创建成功，利用此特点可以实现分布式锁，谁创建该结点成功谁就获得锁。</p>
<h4 id="本项目采用的分布式方案-—-数据库实现乐观锁"><a href="#本项目采用的分布式方案-—-数据库实现乐观锁" class="headerlink" title="*本项目采用的分布式方案**—**数据库实现乐观锁*"></a><em><strong>*本项目采用的分布式方案*</strong></em><em><strong>*—*</strong></em><em><strong>*数据库实现乐观锁*</strong></em></h4><p>下边使用乐观锁的方式实现更新操作：针对待处理视频任务表的status字段增加一个”处理中”状态，当然常规的乐观锁通过设置一个****version****字段，每次更新会将version + 1</p>
<p>update media_process m set m.status&#x3D;’4’ where (m.status&#x3D;’1’ or m.status&#x3D;’3’) and m.fail_count&lt;3 and m.id&#x3D;? update table t set m.version &#x3D; m.version + 1 where m.version &#x3D; 1；</p>
<p>多个线程同时执行上边的sql只会有一个线程执行成功。</p>
<p>什么是乐观锁、悲观锁？</p>
<p>synchronized是一种悲观锁，在执行被synchronized包裹的代码时需要首先获取锁，没有拿到锁则无法执行，是总悲观的认为别的线程会去抢，所以要悲观锁。</p>
<p>乐观锁的思想是它不认为会有线程去争抢，尽管去执行，如果没有执行成功就再去重试。</p>
<h3 id="2-6-6-待处理视频任务执行-—-抢到分布式锁的执行器-开始处理待处理的视频"><a href="#2-6-6-待处理视频任务执行-—-抢到分布式锁的执行器-开始处理待处理的视频" class="headerlink" title="*2.6.6 待处理视频任务执行**—**抢到分布式锁的执行器**开始处理待处理的视频*"></a><em><strong>*2.6.6 待处理视频任务执行*</strong></em><em><strong>*—*</strong></em><em><strong>*抢到分布式锁的执行器*</strong></em><em><strong>*开始处理待处理的视频*</strong></em></h3><p>视频采用并发处理，每个视频使用一个线程去处理，每次处理的视频数量不要超过cpu核心数。</p>
<p>所有视频处理完成，才结束本次执行（通过设置一个计数器，初始值为任务执行线程的数量，每完成一个任务无论失败还是成功都减去1）。</p>
<p>为防止代码异常出现无限期等待则添加超时设置，到达超时时间还没有处理完成仍结束任务。</p>
<h3 id="2-6-7-待处理视频任务处理完之后-—-针对处理完的反馈结果更新数据库状态"><a href="#2-6-7-待处理视频任务处理完之后-—-针对处理完的反馈结果更新数据库状态" class="headerlink" title="*2.6.7 待处理视频任务处理完之后**—**针对处理完的反馈结果更新数据库状态*"></a><em><strong>*2.6.7 待处理视频任务处理完之后*</strong></em><em><strong>*—*</strong></em><em><strong>*针对处理完的反馈结果更新数据库状态*</strong></em></h3><p>分为2种处理结果：</p>
<p>① 处理失败：</p>
<p>Media_process表中要更新  <em><strong>*任务的处理状态为处理失败*<em><strong>，</strong></em>*更新任务已经失败的次数*<em><strong>，</strong></em>*更新任务失败的原因*</strong></em></p>
<p>② 处理成功：</p>
<p>Media_file表中更新  <em><strong>*媒资文件的访问url（avi-&gt;mp4，那么这个url和file_path的区别就是视频处理后的文件）*</strong></em></p>
<p>Media_process表中 ，更新 媒资文件的访问url以及处理状态为处理成功，</p>
<p>Media_process_history表，将media_process中的数据插入到该表中，删除media_process中的数据</p>
<h3 id="2-6-8-如何解决一直处于“处理中”状态的任务？"><a href="#2-6-8-如何解决一直处于“处理中”状态的任务？" class="headerlink" title="*2.6.8 如何解决一直处于“处理中”状态的任务？*"></a><em><strong>*2.6.8 如何解决一直处于“处理中”状态的任务？*</strong></em></h3><p>如果有线程抢占了某个视频的处理任务，如果线程处理过程中挂掉了，该视频的状态将会一直是处理中，其它线程将无法处理这个视频，这个问题需要用补偿机制。</p>
<p>想出一个任务补偿机制：</p>
<p>利用xxl-job单独设置一个后台线程定时任务：找到待处理表中超过执行期限但处理状态为处理中的任务，将任务的状态改为 处理失败。</p>
<h3 id="2-6-9-如何处理处理失败次数超过三次的任务？"><a href="#2-6-9-如何处理处理失败次数超过三次的任务？" class="headerlink" title="*2.6.9 如何处理处理失败次数超过三次的任务？*"></a><em><strong>*2.6.9 如何处理处理失败次数超过三次的任务？*</strong></em></h3><p>当任务达到最大失败次数时一般就说明程序处理此视频存在问题，我的考虑是：要么这个文件的内存太大了超过了处理限制时长，可以先查询出失败次数为3的待处理视频，采用另一个视频编码器重试；第二种就是视频本身存在问题，直接查询出来，将视频在minio中的视频转到人工页面，由人工手动处理。</p>
<h2 id="2-7-绑定媒资"><a href="#2-7-绑定媒资" class="headerlink" title="*2.7 绑定媒资*"></a><em><strong>*2.7 绑定媒资*</strong></em></h2><h3 id="2-7-1-需求分析"><a href="#2-7-1-需求分析" class="headerlink" title="*2.7.1 需求分析*"></a><em><strong>*2.7.1 需求分析*</strong></em></h3><p>到目前为止，<em>*<em>*<em>媒资管理*</em>*</em>*</em><strong>*<em>模块*</em>*<strong>已完成文件上传、视频处理、我的媒资功能等基本功能，其它模块</strong><em>*可以使用媒资文件*</em></strong></p>
<p>① 教育机构用户进入课程管理页面并编辑某一个课程，在”课程大纲”标签页的某一小节后可点击”添加视频“。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps99.jpg" alt="img"> </p>
<p>② 弹出添加视频对话框，可通过视频关键字搜索已审核通过的视频媒资。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps100.jpg" alt="img"> </p>
<p>③ 选择视频媒资，点击提交按钮，完成课程计划绑定媒资流程。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps101.jpg" alt="img"> </p>
<p>④ 绑定结果</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps102.jpg" alt="img"> </p>
<h3 id="2-7-2-数据模型"><a href="#2-7-2-数据模型" class="headerlink" title="*2.7.2 数据模型*"></a><em><strong>*2.7.2 数据模型*</strong></em></h3><p>① 数据库xcplus_content中的媒资文件表</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps103.jpg" alt="img"> </p>
<p>② 媒资文件表 对应的 实体类</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps104.jpg" alt="img"> </p>
<h3 id="2-7-3-接口定义"><a href="#2-7-3-接口定义" class="headerlink" title="*2.7.3 接口定义*"></a><em><strong>*2.7.3 接口定义*</strong></em></h3><p>请求体内容</p>
<p>{  “mediaId”: “70a98b4a2fffc89e50b101f959cc33ca”,  “fileName”: “22-Hmily实现TCC事务-开发bank2的confirm方法.avi”,  “teachplanId”: 257 }</p>
<p>在TeachplanController类中定义接口如下：</p>
<p>Java @ApiOperation(value &#x3D; “课程计划和媒资信息绑定”) @PostMapping(“&#x2F;teachplan&#x2F;association&#x2F;media”) public void associationMedia(@RequestBody BindTeachplanMediaDto bindTeachplanMediaDto){  }</p>
<h3 id="2-7-4-接口开发"><a href="#2-7-4-接口开发" class="headerlink" title="*2.7.4 接口开发*"></a><em><strong>*2.7.4 接口开发*</strong></em></h3><p>参考源码</p>
<h2 id="2-8-解除绑定媒资"><a href="#2-8-解除绑定媒资" class="headerlink" title="*2.8 解除绑定媒资*"></a><em><strong>*2.8 解除绑定媒资*</strong></em></h2><h3 id="2-8-1-需求分析"><a href="#2-8-1-需求分析" class="headerlink" title="*2.8.1 需求分析*"></a><em><strong>*2.8.1 需求分析*</strong></em></h3><p>点击已经绑定的视频名称即可解除绑定。</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps105.jpg" alt="img"> </p>
<h3 id="2-8-2-数据模型"><a href="#2-8-2-数据模型" class="headerlink" title="*2.8.2 数据模型*"></a><em><strong>*2.8.2 数据模型*</strong></em></h3><p>① 数据库xcplus_content中的媒资文件表</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps106.jpg" alt="img"> </p>
<p>② 媒资文件表 对应的 实体类</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps107.jpg" alt="img"> </p>
<h3 id="2-8-3-接口定义"><a href="#2-8-3-接口定义" class="headerlink" title="*2.8.3 接口定义*"></a><em><strong>*2.8.3 接口定义*</strong></em></h3><p>接口定义如下：</p>
<p>Java delete &#x2F;teachplan&#x2F;association&#x2F;media&#x2F;{teachPlanId}&#x2F;{mediaId}  返回200状态码表示成功。</p>
<h1 id="3、课程发布（见下一章节）"><a href="#3、课程发布（见下一章节）" class="headerlink" title="*3、课程发布（见下一章节）*"></a><em><strong>*3、课程发布（见下一章节）*</strong></em></h1><p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps108.jpg" alt="img"> </p>
<h1 id="可能涉及到的面试题-过一遍"><a href="#可能涉及到的面试题-过一遍" class="headerlink" title="*可能涉及到的面试题(过一遍)*"></a><em><strong>*可能涉及到的面试题(过一遍)*</strong></em></h1><h3 id="M-ybatis相关面试题"><a href="#M-ybatis相关面试题" class="headerlink" title="*M**ybatis相关面试题*"></a><em><strong>*M*</strong></em><em><strong>*ybatis相关面试题*</strong></em></h3><p>① 分页插件的基本原理</p>
<p>PageHelper是MyBatis的一个插件，内部实现了一个PageInterceptor拦截器。Mybatis会加载这个拦截器到拦截器链中。</p>
<p>在我们使用过程中先使用PageHelper.startPage这样的语句在当前线程上下文中设置一个ThreadLocal变量，再利用PageInterceptor这个分页拦截器拦截，从ThreadLocal中拿到分页的信息，如果有分页信息拼装分页SQL（limit语句等）进行分页查询，最后再把ThreadLocal中的东西清除掉。</p>
<p>② resultType和resultMap的区别</p>
<p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps109.jpg" alt="img"> </p>
<p><em><strong>*③ ${} 和 #{}*</strong></em></p>
<p><em><strong>*字符串拼接，存在sql注入的风险*</strong></em></p>
<p><em><strong>*字符串占位，可以防止sql注入*</strong></em></p>
<h3 id="系统异常处理相关面试题"><a href="#系统异常处理相关面试题" class="headerlink" title="*系统异常处理相关面试题*"></a><em><strong>*系统异常处理相关面试题*</strong></em></h3><p><img src="/img/loading.gif" data-original="/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/wps110.jpg" alt="img"> </p>
<h3 id="媒资管理服务为社么要做这个？"><a href="#媒资管理服务为社么要做这个？" class="headerlink" title="*媒资管理服务为社么要做这个？*"></a><em><strong>*媒资管理服务为社么要做这个？*</strong></em></h3><p>我们这个项目有很多的地方需要上传图片、文档、视频之类的，我们这个服务呢就是对图片、文件、视频那些进行统一管理。</p>
<h2 id="Spring中事务相关面试题"><a href="#Spring中事务相关面试题" class="headerlink" title="*Spring中事务相关面试题*"></a><em><strong>*Spring中事务相关面试题*</strong></em></h2><h3 id="什么情况下S-p-ring事务会失效？"><a href="#什么情况下S-p-ring事务会失效？" class="headerlink" title="*什么情况下S**p**ring事务会失效？*"></a><em><strong>*什么情况下S*</strong></em><em><strong>*p*</strong></em><em><strong>*ring事务会失效？*</strong></em></h3><p>① 捕获了异常并且进行了处理</p>
<p>② 非事务方法调用事务方法，并且未使用代理对象去调用事务方法</p>
<p>③ 抛出的异常类型和你使用rollbackFor属性所指定的异常类型不匹配的时候</p>
<p>④ 事务方法内部调用事务方法，被调用的事务方法采用propogation_requires_new的方式并且采用通过非代理类对象调用</p>
<h3 id="事务的传播行为有哪些？"><a href="#事务的传播行为有哪些？" class="headerlink" title="*事务的传播行为有哪些？*"></a><em><strong>*事务的传播行为有哪些？*</strong></em></h3><p>① 当前存在事务，则加入该事务；如果当前没有事务，则创建一个新的事务（默认的，使用最多的）</p>
<p>② 不管外部方法是否创建新的事务，都创建一个新的事务，且互不干扰</p>
<p>③ 当前存在事务，创建一个事务嵌套进去；不存在事务的话，则创建一个新的事务</p>
<p>④ 当前存在事务，加入进去；否则，抛出异常。</p>
<h3 id="事务的隔离级别？"><a href="#事务的隔离级别？" class="headerlink" title="*事务的隔离级别？*"></a><em><strong>*事务的隔离级别？*</strong></em></h3><p>读未提交：它允许读取尚未提交的数据变更，<em><strong>*可能会导致脏读、幻读或不可重复读*</strong></em></p>
<p>读已提交：许读取并发事务已经提交的数据，<em><strong>*可以阻止脏读，但是幻读或不可重复读仍有可能发生*</strong></em></p>
<p>可重复读：对同一字段的多次读取结果都是一致的，会产生幻读</p>
<p>串行化：依次执行，解决所有问题</p>
<h3 id="事务实现的原理是什么？"><a href="#事务实现的原理是什么？" class="headerlink" title="*事务实现的原理是什么？*"></a><em><strong>*事务实现的原理是什么？*</strong></em></h3><p>① 首先，Spring的事务是基于****数据库事务和aop动态代理****实现的</p>
<p>② spring对于使用@Transactional的类创一个代理对象作为bean</p>
<p>③ 当调用代理对象的某个方法时，先判断该方法上是否加了@Transactional注解</p>
<p>④ 如果加了，则利用事务管理器创建一个数据库连接，并且存放到ThreadLocal中</p>
<p>⑤ 设置数据库的autocommit属性为false，禁止事务的自动提交</p>
<p>⑥ 执行当前方法，如果当前方法出现异常进行回滚，否则提交事务</p>
<h3 id="你使用事务在项目有什么注意的地方吗？"><a href="#你使用事务在项目有什么注意的地方吗？" class="headerlink" title="*你使用事务在项目有什么注意的地方吗？*"></a><em><strong>*你使用事务在项目有什么注意的地方吗？*</strong></em></h3><p>① 避免长事务所带来的死锁、耗时、并发情况下数据库连接池被占满的问题</p>
<p>长事务：整个业务方法都在同一个事务中，粒度比较粗</p>
<p>解决：只针对某个数据库的操作设置事务，细化粒度</p>
<p>② 事务失效</p>
<h1 id="你能想到哪些地方可以和知识图谱结合的？"><a href="#你能想到哪些地方可以和知识图谱结合的？" class="headerlink" title="*你能想到哪些地方可以和知识图谱结合的？*"></a><em><strong>*你能想到哪些地方可以和知识图谱结合的？*</strong></em></h1><p>① 课程发布的时候，如何根据知识推理的方式，将这个课及时推送给可能****感兴趣的用户****？</p>
<p>知识推理：找到这个对这个课程感兴趣的群体</p>
<p>及时推送：利用xxl-job向用户发送短信提醒</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">peishusu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/posts/2c0e2adc.html">http://example.com/posts/2c0e2adc.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">沛公共的JAVA学习之旅</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E9%A1%B9%E7%9B%AE/">项目</a><a class="post-meta__tags" href="/tags/%E9%80%80%E5%BD%B9%E5%86%9B%E4%BA%BA%E5%9C%A8%E7%BA%BF%E5%9F%B9%E8%AE%ADapp%E9%A1%B9%E7%9B%AE/">退役军人在线培训app项目</a></div><div class="post_share"><div class="social-share" data-image="https://tse2-mm.cn.bing.net/th/id/OIP-C.o3PrY54hzhMsJ0tEVOZiUwHaEr?w=254&amp;h=180&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.3&amp;pid=1.7" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/8968071b.html" title="RPC项目"><img class="cover" src="/img/loading.gif" data-original="https://tse1-mm.cn.bing.net/th/id/OIP-C.Ye0RvvStcWr5-mZaeffbUQHaEH?w=290&amp;h=180&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.3&amp;pid=1.7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">RPC项目</div></div></a></div><div class="next-post pull-right"><a href="/posts/7b25d017.html" title="redis"><img class="cover" src="/img/loading.gif" data-original="https://tse4-mm.cn.bing.net/th/id/OIP-C.Jed-UVwaIqf16oq5f8ATDQHaE8?w=264&amp;h=180&amp;c=7&amp;r=0&amp;o=5&amp;pid=1.7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">redis</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/8968071b.html" title="RPC项目"><img class="cover" src="/img/loading.gif" data-original="https://tse1-mm.cn.bing.net/th/id/OIP-C.Ye0RvvStcWr5-mZaeffbUQHaEH?w=290&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-05-28</div><div class="title">RPC项目</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/loading.gif" data-original="/img/jilaiya.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">peishusu</div><div class="author-info__description">做好自己，不要放弃</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">32</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">28</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/peishusu"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/peishusu" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://www.wolai.com/peigongong/rpJrDcnCTP8wdVcUTdHqKL" target="_blank" title="wolai"><i class="fa fa-book-open"></i></a><a class="social-icon" href="/peishusu@163.com" target="_blank" title="Email"><i class="fas fa-envelope-open-text"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">请关注个人的wolai地址(https://www.wolai.com/peigongong/rpJrDcnCTP8wdVcUTdHqKL) ,内容还未迁移过来</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA"><span class="toc-number">1.</span> <span class="toc-text">基础框架搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA%E7%88%B6%E5%B7%A5%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%9F%BA%E7%A1%80base%E5%B7%A5%E7%A8%8B"><span class="toc-number">1.1.</span> <span class="toc-text">构建父工程以及基础base工程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#git%E7%9B%B8%E5%85%B3%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">1.1.1.</span> <span class="toc-text">git相关的问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1%E3%80%81%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97"><span class="toc-number">2.</span> <span class="toc-text">*1、内容管理模块*</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E8%AF%BE%E7%A8%8B%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.1.</span> <span class="toc-text">*1.1 课程查询*</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E8%AF%BE%E7%A8%8B%E5%88%86%E7%B1%BB%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.2.</span> <span class="toc-text">*1.2 课程分类查询*</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-1-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">2.2.1.</span> <span class="toc-text">*1.2.1 需求分析*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-2-%E8%AF%BE%E7%A8%8B%E5%88%86%E7%B1%BB%E8%A1%A8%E8%AE%BE%E8%AE%A1%E4%BB%A5%E5%8F%8A%E5%AF%B9%E5%BA%94%E7%9A%84%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="toc-number">2.2.2.</span> <span class="toc-text">*1.2.2 课程分类表设计以及对应的实体类*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-3-%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89"><span class="toc-number">2.2.3.</span> <span class="toc-text">*1.2.3 接口定义*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-4-%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-number">2.2.4.</span> <span class="toc-text">*1.2.4 接口开发*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-5-%E6%9C%80%E7%BB%88%E6%95%88%E6%9E%9C"><span class="toc-number">2.2.5.</span> <span class="toc-text">*1.2.5 最终效果*</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E6%96%B0%E5%A2%9E%E8%AF%BE%E7%A8%8B%EF%BC%88%E5%AE%8C%E6%88%90%E7%9A%84%E6%98%AF%E8%AF%BE%E7%A8%8B%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF%E3%80%81%E8%AF%BE%E7%A8%8B%E8%90%A5%E9%94%80%E4%BF%A1%E6%81%AF%EF%BC%89"><span class="toc-number">2.3.</span> <span class="toc-text">*1.3 新增课程（完成的是课程基本信息、课程营销信息）*</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-1-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">2.3.1.</span> <span class="toc-text">*1.3.1 需求分析*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-2-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E4%BB%A5%E5%8F%8A%E5%AF%B9%E5%BA%94%E7%9A%84%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="toc-number">2.3.2.</span> <span class="toc-text">*1.3.2 数据库表以及对应的实体类*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-3-%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89"><span class="toc-number">2.3.3.</span> <span class="toc-text">*1.3.3 接口定义*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-4-%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-number">2.3.4.</span> <span class="toc-text">*1.3.4 接口开发*</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-%E4%BF%AE%E6%94%B9%E8%AF%BE%E7%A8%8B"><span class="toc-number">2.4.</span> <span class="toc-text">*1.4 修改课程*</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-1-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">2.4.1.</span> <span class="toc-text">*1.4.1 需求分析*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-2-%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.4.2.</span> <span class="toc-text">*1.4.2 数据模型*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-3-%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89"><span class="toc-number">2.4.3.</span> <span class="toc-text">*1.4.3 接口定义*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-4-%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-number">2.4.4.</span> <span class="toc-text">*1.4.4 接口开发*</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-%E8%AF%BE%E7%A8%8B%E8%AE%A1%E5%88%92%E2%80%93%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.5.</span> <span class="toc-text">*1.5 课程计划–查询*</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-1-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">2.5.1.</span> <span class="toc-text">*1.5.1 需求分析*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-2-%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.5.2.</span> <span class="toc-text">*1.5.2 数据模型*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-3-%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89"><span class="toc-number">2.5.3.</span> <span class="toc-text">*1.5.3 接口定义*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-4-%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0"><span class="toc-number">2.5.4.</span> <span class="toc-text">*1.5.4 接口实现*</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6-%E8%AF%BE%E7%A8%8B%E8%AE%A1%E5%88%92%E2%80%93%E5%A2%9E%E5%8A%A0-%E4%BF%AE%E6%94%B9"><span class="toc-number">2.6.</span> <span class="toc-text">*1.6 课程计划–增加&#x2F;修改*</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-1-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">2.6.1.</span> <span class="toc-text">*1.6.1 需求分析*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-2-%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.6.2.</span> <span class="toc-text">*1.6.2 数据模型*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-3-%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89"><span class="toc-number">2.6.3.</span> <span class="toc-text">*1.6.3 接口定义*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-4-%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0"><span class="toc-number">2.6.4.</span> <span class="toc-text">*1.6.4 接口实现*</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-7-%E8%AF%BE%E7%A8%8B%E8%AE%A1%E5%88%92%E2%80%93%E5%88%A0%E9%99%A4"><span class="toc-number">2.7.</span> <span class="toc-text">*1.7 课程计划–删除*</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-1-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">2.7.1.</span> <span class="toc-text">*1.7.1 需求分析*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-2-%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.7.2.</span> <span class="toc-text">*1.7.2 数据模型*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-3-%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89"><span class="toc-number">2.7.3.</span> <span class="toc-text">*1.7.3 接口定义*</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-8-%E8%AF%BE%E7%A8%8B%E8%AE%A1%E5%88%92-%E4%B8%8A%E7%A7%BB%E3%80%81%E4%B8%8B%E7%A7%BB"><span class="toc-number">2.8.</span> <span class="toc-text">*1.8 课程计划-上移、下移*</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-8-1-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">2.8.1.</span> <span class="toc-text">*1.8.1 需求分析*</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-9-%E5%B8%88%E8%B5%84%E7%AE%A1%E7%90%86"><span class="toc-number">2.9.</span> <span class="toc-text">*1.9 师资管理*</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-9-1-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">2.9.1.</span> <span class="toc-text">*1.9.1 需求分析*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-9-2-%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.9.2.</span> <span class="toc-text">*1.9.2 数据模型*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-9-3-%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89%E4%BB%A5%E5%8F%8A%E5%AE%9E%E7%8E%B0"><span class="toc-number">2.9.3.</span> <span class="toc-text">*1.9.3 接口定义以及实现*</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-10-%E5%88%A0%E9%99%A4%E8%AF%BE%E7%A8%8B"><span class="toc-number">2.10.</span> <span class="toc-text">*1.10 删除课程*</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-10-1-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">2.10.1.</span> <span class="toc-text">*1.10.1 需求分析*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-10-2-%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.10.2.</span> <span class="toc-text">*1.10.2 数据模型*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-10-3-%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89%E5%92%8C%E5%AE%9E%E7%8E%B0"><span class="toc-number">2.10.3.</span> <span class="toc-text">*1.10.3 接口定义和实现*</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2%E3%80%81%E5%AA%92%E8%B5%84%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="toc-number">3.</span> <span class="toc-text">*2、媒资管理系统*</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E6%A8%A1%E5%9D%97%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">3.1.</span> <span class="toc-text">*2.1 模块需求分析*</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1-%E6%A8%A1%E5%9D%97%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.1.1.</span> <span class="toc-text">*2.1.1 模块介绍*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-2-%E4%B8%9A%E5%8A%A1%E6%B5%81%E7%A8%8B"><span class="toc-number">3.1.2.</span> <span class="toc-text">*2.1.2 业务流程*</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-1-%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87"><span class="toc-number">3.1.2.1.</span> <span class="toc-text">*1.2.1 上传图片*</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-2-%E4%B8%8A%E4%BC%A0%E8%A7%86%E9%A2%91"><span class="toc-number">3.1.2.2.</span> <span class="toc-text">*1.2.2 上传视频*</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-3-%E5%A4%84%E7%90%86%E8%A7%86%E9%A2%91"><span class="toc-number">3.1.2.3.</span> <span class="toc-text">*1.2.3 处理视频*</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-4-%E5%AE%A1%E6%A0%B8%E5%AA%92%E8%B5%84"><span class="toc-number">3.1.2.4.</span> <span class="toc-text">*1.2.4 审核媒资*</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-5-%E7%BB%91%E5%AE%9A%E5%AA%92%E8%B5%84"><span class="toc-number">3.1.2.5.</span> <span class="toc-text">*1.2.5 绑定媒资*</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-3-%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.1.3.</span> <span class="toc-text">*2.1.3 数据模型*</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E6%90%AD%E5%BB%BAnacos%E5%92%8C%E7%BD%91%E5%85%B3"><span class="toc-number">3.2.</span> <span class="toc-text">*2.2 搭建nacos和网关*</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E7%94%A8nacos%E5%92%8Cgateway%EF%BC%9F"><span class="toc-number">3.2.1.</span> <span class="toc-text">*2.2.1 为什么用nacos和gateway？*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-%E6%90%AD%E5%BB%BAnacos%EF%BC%88%E4%B8%8D%E7%94%A8%E7%9C%8B%E3%80%82%E3%80%82%E3%80%82%E3%80%82%EF%BC%89"><span class="toc-number">3.2.2.</span> <span class="toc-text">*2.2.2 搭建nacos（不用看。。。。）*</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E4%B8%AD%E5%BF%83"><span class="toc-number">3.2.2.1.</span> <span class="toc-text">*服务发现中心*</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83"><span class="toc-number">3.2.2.2.</span> <span class="toc-text">*配置中心*</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-3-%E6%90%AD%E5%BB%BAGateWay"><span class="toc-number">3.2.3.</span> <span class="toc-text">*2.2.3 搭建GateWay*</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-number">3.3.</span> <span class="toc-text">*2.3 分布式文件系统*</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-1-%E4%BB%80%E4%B9%88%E6%98%AF%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%9F"><span class="toc-number">3.3.1.</span> <span class="toc-text">*2.3.1 什么是分布式文件系统？*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-2-%E5%B8%B8%E8%A7%81%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%88%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%89"><span class="toc-number">3.3.2.</span> <span class="toc-text">*2.3.2 常见的分布式文件系统（技术选型的问题）*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-3-MinIO"><span class="toc-number">3.3.3.</span> <span class="toc-text">*2.3.3 MinIO*</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E7%82%B9%EF%BC%9F%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E7%94%A8%E4%BB%96%EF%BC%9F"><span class="toc-number">3.3.3.1.</span> <span class="toc-text">*特点？为什么选用他？*</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MinIO%E7%9A%84%E4%B8%8A%E4%BC%A0%E3%80%81%E5%88%A0%E9%99%A4%E3%80%81%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C"><span class="toc-number">3.3.3.2.</span> <span class="toc-text">*MinIO的上传、删除、查询操作*</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87"><span class="toc-number">3.4.</span> <span class="toc-text">*2.4 上传图片*</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-1-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">3.4.1.</span> <span class="toc-text">*2.4.1 需求分析*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-2-%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.4.2.</span> <span class="toc-text">*2.4.2 数据模型*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-3-%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89"><span class="toc-number">3.4.3.</span> <span class="toc-text">*2.4.3 接口定义*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-4-%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-number">3.4.4.</span> <span class="toc-text">*2.4.4 接口开发*</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-%E4%B8%8A%E4%BC%A0%E8%A7%86%E9%A2%91%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89"><span class="toc-number">3.5.</span> <span class="toc-text">*2.5 上传视频（重点）*</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-1-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">3.5.1.</span> <span class="toc-text">*2.5.1 需求分析*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-2-%E6%96%AD%E7%82%B9%E7%BB%AD%E4%BC%A0%E6%8A%80%E6%9C%AF%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%8C-%E7%AE%80%E5%8E%86%E4%B8%8A%E8%A6%81%E5%86%99%E5%BE%97-%EF%BC%89"><span class="toc-number">3.5.2.</span> <span class="toc-text">*2.5.2 断点续传技术（重点，**简历上要写得**）*</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0-%E4%BB%80%E4%B9%88%E6%98%AF%E6%96%AD%E7%82%B9%E7%BB%AD%E4%BC%A0%E6%8A%80%E6%9C%AF%EF%BC%9F"><span class="toc-number">3.5.2.1.</span> <span class="toc-text">*① 什么是断点续传技术？*</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1-%E8%A7%86%E9%A2%91%E4%B8%8A%E4%BC%A0%E6%B5%81%E7%A8%8B"><span class="toc-number">3.5.2.2.</span> <span class="toc-text">*② 视频上传流程*</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-%E8%A7%86%E9%A2%91%E5%A4%84%E7%90%86%E6%8A%80%E6%9C%AF%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%8C%E7%AE%80%E5%8E%86%E4%B8%8A%E8%A6%81%E5%86%99%E5%BE%97%EF%BC%89"><span class="toc-number">3.6.</span> <span class="toc-text">*2.6 视频处理技术（重点，简历上要写得）*</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-1-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">3.6.1.</span> <span class="toc-text">*2.6.1 需求分析*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-2-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6"><span class="toc-number">3.6.2.</span> <span class="toc-text">*2.6.2 分布式任务调度*</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#XXL-LOB"><span class="toc-number">3.6.2.1.</span> <span class="toc-text">*XXL-LOB*</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-3-%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88"><span class="toc-number">3.6.3.</span> <span class="toc-text">*2.6.3 技术方案*</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%9D%E8%AF%81%E4%BB%BB%E5%8A%A1%E4%B8%8D%E4%BC%9A%E8%A2%AB%E9%87%8D%E5%A4%8D%E6%89%A7%E8%A1%8C"><span class="toc-number">3.6.3.1.</span> <span class="toc-text">*保证任务不会被重复执行*</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%86%E9%A2%91%E5%A4%84%E7%90%86%E6%96%B9%E6%A1%88"><span class="toc-number">3.6.3.2.</span> <span class="toc-text">*视频处理方案*</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-4-%E5%BE%85%E5%A4%84%E7%90%86%E8%A7%86%E9%A2%91%E4%BB%BB%E5%8A%A1%E7%9A%84%E6%B7%BB%E5%8A%A0%E5%92%8C%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.6.4.</span> <span class="toc-text">*2.6.4 待处理视频任务的添加和查询*</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">3.6.4.1.</span> <span class="toc-text">*需求分析*</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%BE%85%E5%A4%84%E7%90%86%E8%A7%86%E9%A2%91%E4%BB%BB%E5%8A%A1"><span class="toc-number">3.6.4.2.</span> <span class="toc-text">*添加待处理视频任务*</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%BE%85%E5%A4%84%E7%90%86%E8%A7%86%E9%A2%91%E4%BB%BB%E5%8A%A1"><span class="toc-number">3.6.4.3.</span> <span class="toc-text">*查询待处理视频任务*</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-5-%E5%BE%85%E5%A4%84%E7%90%86%E8%A7%86%E9%A2%91%E4%BB%BB%E5%8A%A1%E6%89%A7%E8%A1%8C%E5%89%8D%E7%9A%84%E5%88%A4%E6%96%AD-%E2%80%94-%E4%BD%BF%E7%94%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81"><span class="toc-number">3.6.5.</span> <span class="toc-text">*2.6.5 待处理视频任务执行前的判断**—**使用分布式锁*</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8%E5%88%B0%E8%BF%99%E4%B8%AA%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%EF%BC%9F"><span class="toc-number">3.6.5.1.</span> <span class="toc-text">*为什么要用到这个分布式锁？*</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E6%96%B9%E6%A1%88"><span class="toc-number">3.6.5.2.</span> <span class="toc-text">*常见的分布式锁方案*</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%AC%E9%A1%B9%E7%9B%AE%E9%87%87%E7%94%A8%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%B9%E6%A1%88-%E2%80%94-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E7%8E%B0%E4%B9%90%E8%A7%82%E9%94%81"><span class="toc-number">3.6.5.3.</span> <span class="toc-text">*本项目采用的分布式方案**—**数据库实现乐观锁*</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-6-%E5%BE%85%E5%A4%84%E7%90%86%E8%A7%86%E9%A2%91%E4%BB%BB%E5%8A%A1%E6%89%A7%E8%A1%8C-%E2%80%94-%E6%8A%A2%E5%88%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E7%9A%84%E6%89%A7%E8%A1%8C%E5%99%A8-%E5%BC%80%E5%A7%8B%E5%A4%84%E7%90%86%E5%BE%85%E5%A4%84%E7%90%86%E7%9A%84%E8%A7%86%E9%A2%91"><span class="toc-number">3.6.6.</span> <span class="toc-text">*2.6.6 待处理视频任务执行**—**抢到分布式锁的执行器**开始处理待处理的视频*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-7-%E5%BE%85%E5%A4%84%E7%90%86%E8%A7%86%E9%A2%91%E4%BB%BB%E5%8A%A1%E5%A4%84%E7%90%86%E5%AE%8C%E4%B9%8B%E5%90%8E-%E2%80%94-%E9%92%88%E5%AF%B9%E5%A4%84%E7%90%86%E5%AE%8C%E7%9A%84%E5%8F%8D%E9%A6%88%E7%BB%93%E6%9E%9C%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E7%8A%B6%E6%80%81"><span class="toc-number">3.6.7.</span> <span class="toc-text">*2.6.7 待处理视频任务处理完之后**—**针对处理完的反馈结果更新数据库状态*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-8-%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E4%B8%80%E7%9B%B4%E5%A4%84%E4%BA%8E%E2%80%9C%E5%A4%84%E7%90%86%E4%B8%AD%E2%80%9D%E7%8A%B6%E6%80%81%E7%9A%84%E4%BB%BB%E5%8A%A1%EF%BC%9F"><span class="toc-number">3.6.8.</span> <span class="toc-text">*2.6.8 如何解决一直处于“处理中”状态的任务？*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-9-%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E5%A4%84%E7%90%86%E5%A4%B1%E8%B4%A5%E6%AC%A1%E6%95%B0%E8%B6%85%E8%BF%87%E4%B8%89%E6%AC%A1%E7%9A%84%E4%BB%BB%E5%8A%A1%EF%BC%9F"><span class="toc-number">3.6.9.</span> <span class="toc-text">*2.6.9 如何处理处理失败次数超过三次的任务？*</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-7-%E7%BB%91%E5%AE%9A%E5%AA%92%E8%B5%84"><span class="toc-number">3.7.</span> <span class="toc-text">*2.7 绑定媒资*</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-1-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">3.7.1.</span> <span class="toc-text">*2.7.1 需求分析*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-2-%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.7.2.</span> <span class="toc-text">*2.7.2 数据模型*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-3-%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89"><span class="toc-number">3.7.3.</span> <span class="toc-text">*2.7.3 接口定义*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-4-%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-number">3.7.4.</span> <span class="toc-text">*2.7.4 接口开发*</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-8-%E8%A7%A3%E9%99%A4%E7%BB%91%E5%AE%9A%E5%AA%92%E8%B5%84"><span class="toc-number">3.8.</span> <span class="toc-text">*2.8 解除绑定媒资*</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-1-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">3.8.1.</span> <span class="toc-text">*2.8.1 需求分析*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-2-%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-number">3.8.2.</span> <span class="toc-text">*2.8.2 数据模型*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-3-%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89"><span class="toc-number">3.8.3.</span> <span class="toc-text">*2.8.3 接口定义*</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3%E3%80%81%E8%AF%BE%E7%A8%8B%E5%8F%91%E5%B8%83%EF%BC%88%E8%A7%81%E4%B8%8B%E4%B8%80%E7%AB%A0%E8%8A%82%EF%BC%89"><span class="toc-number">4.</span> <span class="toc-text">*3、课程发布（见下一章节）*</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%AF%E8%83%BD%E6%B6%89%E5%8F%8A%E5%88%B0%E7%9A%84%E9%9D%A2%E8%AF%95%E9%A2%98-%E8%BF%87%E4%B8%80%E9%81%8D"><span class="toc-number">5.</span> <span class="toc-text">*可能涉及到的面试题(过一遍)*</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#M-ybatis%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="toc-number">5.0.1.</span> <span class="toc-text">*M**ybatis相关面试题*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="toc-number">5.0.2.</span> <span class="toc-text">*系统异常处理相关面试题*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AA%92%E8%B5%84%E7%AE%A1%E7%90%86%E6%9C%8D%E5%8A%A1%E4%B8%BA%E7%A4%BE%E4%B9%88%E8%A6%81%E5%81%9A%E8%BF%99%E4%B8%AA%EF%BC%9F"><span class="toc-number">5.0.3.</span> <span class="toc-text">*媒资管理服务为社么要做这个？*</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring%E4%B8%AD%E4%BA%8B%E5%8A%A1%E7%9B%B8%E5%85%B3%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="toc-number">5.1.</span> <span class="toc-text">*Spring中事务相关面试题*</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8BS-p-ring%E4%BA%8B%E5%8A%A1%E4%BC%9A%E5%A4%B1%E6%95%88%EF%BC%9F"><span class="toc-number">5.1.1.</span> <span class="toc-text">*什么情况下S**p**ring事务会失效？*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E4%BC%A0%E6%92%AD%E8%A1%8C%E4%B8%BA%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-number">5.1.2.</span> <span class="toc-text">*事务的传播行为有哪些？*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%EF%BC%9F"><span class="toc-number">5.1.3.</span> <span class="toc-text">*事务的隔离级别？*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">5.1.4.</span> <span class="toc-text">*事务实现的原理是什么？*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%A0%E4%BD%BF%E7%94%A8%E4%BA%8B%E5%8A%A1%E5%9C%A8%E9%A1%B9%E7%9B%AE%E6%9C%89%E4%BB%80%E4%B9%88%E6%B3%A8%E6%84%8F%E7%9A%84%E5%9C%B0%E6%96%B9%E5%90%97%EF%BC%9F"><span class="toc-number">5.1.5.</span> <span class="toc-text">*你使用事务在项目有什么注意的地方吗？*</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%A0%E8%83%BD%E6%83%B3%E5%88%B0%E5%93%AA%E4%BA%9B%E5%9C%B0%E6%96%B9%E5%8F%AF%E4%BB%A5%E5%92%8C%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E7%BB%93%E5%90%88%E7%9A%84%EF%BC%9F"><span class="toc-number">6.</span> <span class="toc-text">*你能想到哪些地方可以和知识图谱结合的？*</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/3852f11e.html" title="面试--算法"><img src="/img/loading.gif" data-original="https://tse4-mm.cn.bing.net/th/id/OIP-C.drv_aUuiTkKhvd9JygeszgHaER?w=283&amp;h=180&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.3&amp;pid=1.7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="面试--算法"/></a><div class="content"><a class="title" href="/posts/3852f11e.html" title="面试--算法">面试--算法</a><time datetime="2024-06-25T14:04:11.000Z" title="发表于 2024-06-25 22:04:11">2024-06-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/1bb08f7a.html" title="JWT"><img src="/img/loading.gif" data-original="https://tse3-mm.cn.bing.net/th/id/OIP-C.IjXbuIFcu9ZM9Ivvyeu7cwHaD4?w=312&amp;h=180&amp;c=7&amp;r=0&amp;o=5&amp;pid=1.7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JWT"/></a><div class="content"><a class="title" href="/posts/1bb08f7a.html" title="JWT">JWT</a><time datetime="2024-06-22T13:14:49.000Z" title="发表于 2024-06-22 21:14:49">2024-06-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/a750524a.html" title="spring-security"><img src="/img/loading.gif" data-original="https://ae01.alicdn.com/kf/H457c1d28142a4bd89d0577cb28c7bfb5j.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="spring-security"/></a><div class="content"><a class="title" href="/posts/a750524a.html" title="spring-security">spring-security</a><time datetime="2024-06-22T09:01:24.244Z" title="发表于 2024-06-22 17:01:24">2024-06-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/aa55683f.html" title="JUC"><img src="/img/loading.gif" data-original="https://tse1-mm.cn.bing.net/th/id/OIP-C.Lmrn8WhH_ezNA9AuLvhq6QHaEL?w=303&amp;h=180&amp;c=7&amp;r=0&amp;o=5&amp;pid=1.7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JUC"/></a><div class="content"><a class="title" href="/posts/aa55683f.html" title="JUC">JUC</a><time datetime="2024-06-17T07:39:08.000Z" title="发表于 2024-06-17 15:39:08">2024-06-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/c4ddf82e.html" title="学习规划"><img src="/img/loading.gif" data-original="https://tse1-mm.cn.bing.net/th/id/OIP-C.cnOiK4Hox5kI0RmDN0yNBAHaEK?w=326&amp;h=183&amp;c=7&amp;r=0&amp;o=5&amp;pid=1.7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="学习规划"/></a><div class="content"><a class="title" href="/posts/c4ddf82e.html" title="学习规划">学习规划</a><time datetime="2024-06-15T14:16:32.000Z" title="发表于 2024-06-15 22:16:32">2024-06-15</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2024 By peishusu</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://shenpeilovejilaiya.cn/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="true" data-text="I,LOVE,YOU" data-fontsize="15px" data-random="true" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div>
        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(r){r.imageLazyLoadSetting.processImages=t;var e=r.imageLazyLoadSetting.isSPA,n=r.imageLazyLoadSetting.preloadRatio||1,c=a();function a(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(){e&&(c=a());for(var t,o=0;o<c.length;o++)0<=(t=(t=c[o]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(r.innerHeight*n||document.documentElement.clientHeight*n)&&function(){var t,e,n,a,i=c[o];e=function(){c=c.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(n=new Image,a=t.getAttribute("data-original"),n.onload=function(){t.src=a,t.removeAttribute("data-original"),e&&e()},t.src!==a&&(n.src=a))}()}function i(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",i),r.addEventListener("resize",i),r.addEventListener("orientationchange",i)}(this);</script></body></html>